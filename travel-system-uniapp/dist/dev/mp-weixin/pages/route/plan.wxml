<view class="plan-page data-v-f6d30d9a"><view class="page-bg data-v-f6d30d9a"></view><view class="step-indicator data-v-f6d30d9a"><view class="step-indicator-header data-v-f6d30d9a"><text class="step-indicator-title data-v-f6d30d9a">生成属于自己的专属路线</text></view><view class="step-indicator-content data-v-f6d30d9a"><view wx:for="{{a}}" wx:for-item="step" wx:key="d" class="{{['step-item', 'data-v-f6d30d9a', step.e && 'active', step.f && 'completed']}}" bindtap="{{step.g}}"><view class="step-circle data-v-f6d30d9a"><text wx:if="{{step.a}}" class="step-check data-v-f6d30d9a">✓</text><text wx:else class="step-number data-v-f6d30d9a">{{step.b}}</text></view><text class="step-label data-v-f6d30d9a">{{step.c}}</text></view></view></view><scroll-view scroll-y class="plan-scroll data-v-f6d30d9a"><view hidden="{{!g}}" class="step-content data-v-f6d30d9a"><view class="step-header data-v-f6d30d9a"><text class="step-title data-v-f6d30d9a">选择目的地</text><text class="step-subtitle data-v-f6d30d9a">告诉我们你想去哪里</text></view><view class="city-cards data-v-f6d30d9a"><view wx:for="{{b}}" wx:for-item="city" wx:key="f" class="{{['city-card', 'data-v-f6d30d9a', city.g && 'active']}}" bindtap="{{city.h}}"><view class="city-card-bg data-v-f6d30d9a" style="{{'background-image:' + city.a + ';' + ('background-color:' + city.b)}}"><view class="city-card-overlay data-v-f6d30d9a"></view></view><view class="city-card-content data-v-f6d30d9a"><text class="city-name data-v-f6d30d9a">{{city.c}}</text><text class="city-desc data-v-f6d30d9a">{{city.d}}</text></view><view wx:if="{{city.e}}" class="city-check-icon data-v-f6d30d9a">✓</view></view></view><view class="custom-destination data-v-f6d30d9a"><text class="custom-label data-v-f6d30d9a">或输入其他目的地</text><input class="destination-input data-v-f6d30d9a" placeholder="输入城市名称..." placeholder-style="color: #999999;" bindinput="{{c}}" type="text" maxlength="50" value="{{d}}"/></view><view class="quick-tags-section data-v-f6d30d9a"><view class="quick-tags-header data-v-f6d30d9a"><text class="quick-tags-title data-v-f6d30d9a">快速选择</text></view><view class="quick-tags-list data-v-f6d30d9a"><view wx:for="{{e}}" wx:for-item="tag" wx:key="c" class="{{['quick-tag-item', 'data-v-f6d30d9a', tag.d && 'active']}}" bindtap="{{tag.e}}"><text class="quick-tag-icon data-v-f6d30d9a">{{tag.a}}</text><text class="quick-tag-text data-v-f6d30d9a">{{tag.b}}</text></view></view></view><view class="nlp-trigger-section data-v-f6d30d9a"><view class="nlp-trigger-btn data-v-f6d30d9a" bindtap="{{f}}"><text class="nlp-trigger-icon data-v-f6d30d9a">💭</text><text class="nlp-trigger-text data-v-f6d30d9a">点击输入我的想法</text><text class="nlp-trigger-arrow data-v-f6d30d9a">›</text></view></view></view><view hidden="{{!t}}" class="step-content data-v-f6d30d9a"><view class="step-header data-v-f6d30d9a"><text class="step-title data-v-f6d30d9a">选择出行时间与成员</text><text class="step-subtitle data-v-f6d30d9a">规划你的旅行日期和同行人员</text></view><view class="date-picker-container data-v-f6d30d9a"><view class="date-input-wrapper data-v-f6d30d9a"><view class="date-input date-input-clickable data-v-f6d30d9a" bindtap="{{j}}"><text class="date-label data-v-f6d30d9a">开始日期</text><text class="{{['date-value', 'data-v-f6d30d9a', i && 'placeholder']}}">{{h}}</text></view><text class="date-separator data-v-f6d30d9a">至</text><view class="date-input date-input-clickable data-v-f6d30d9a" bindtap="{{m}}"><text class="date-label data-v-f6d30d9a">结束日期</text><text class="{{['date-value', 'data-v-f6d30d9a', l && 'placeholder']}}">{{k}}</text></view></view><view wx:if="{{n}}" class="days-display data-v-f6d30d9a"><text class="days-text data-v-f6d30d9a">共 {{o}} 天 {{p}} 晚</text></view><view wx:if="{{q}}" class="date-tips data-v-f6d30d9a"><text class="date-tips-icon data-v-f6d30d9a">ℹ️</text><text class="date-tips-text data-v-f6d30d9a">{{r}}</text></view></view><view class="companion-section data-v-f6d30d9a"><text class="section-label data-v-f6d30d9a">选择同行成员</text><view class="companion-grid data-v-f6d30d9a"><view wx:for="{{s}}" wx:for-item="companion" wx:key="c" class="{{['companion-card', 'data-v-f6d30d9a', companion.d && 'active']}}" bindtap="{{companion.e}}"><view class="companion-icon-wrapper data-v-f6d30d9a"><text class="companion-icon data-v-f6d30d9a">{{companion.a}}</text></view><text class="companion-name data-v-f6d30d9a">{{companion.b}}</text></view></view></view></view><view hidden="{{!H}}" class="step-content data-v-f6d30d9a"><view class="step-header data-v-f6d30d9a"><text class="step-title data-v-f6d30d9a">设置旅行偏好</text><text class="step-subtitle data-v-f6d30d9a">帮助我们更好地为你规划</text></view><view class="preference-tags-section data-v-f6d30d9a"><text class="section-label data-v-f6d30d9a">旅行风格</text><view class="tag-list data-v-f6d30d9a"><view wx:for="{{v}}" wx:for-item="tag" wx:key="b" class="{{['tag-item', 'data-v-f6d30d9a', tag.c && 'active']}}" style="{{tag.d}}" bindtap="{{tag.e}}"><text class="data-v-f6d30d9a">{{tag.a}}</text></view></view></view><view class="slider-section data-v-f6d30d9a"><view class="slider-header data-v-f6d30d9a"><text class="slider-label data-v-f6d30d9a">行程节奏</text><text class="slider-value data-v-f6d30d9a">{{w}}</text></view><view class="slider-container data-v-f6d30d9a"><view class="slider-labels data-v-f6d30d9a"><text class="slider-left data-v-f6d30d9a">😴 睡到自然醒</text><text class="slider-right data-v-f6d30d9a">⚡ 打卡狂魔</text></view><slider class="preference-slider data-v-f6d30d9a" value="{{x}}" min="0" max="100" step="10" activeColor="#3ba272" backgroundColor="#e5e5e5" block-color="#3ba272" block-size="20" bindchange="{{y}}"/></view></view><view class="slider-section data-v-f6d30d9a"><view class="slider-header data-v-f6d30d9a"><text class="slider-label data-v-f6d30d9a">预算偏好</text><text class="slider-value data-v-f6d30d9a">{{z}}</text></view><view class="slider-container data-v-f6d30d9a"><view class="slider-labels data-v-f6d30d9a"><text class="slider-left data-v-f6d30d9a">💰 经济实惠</text><text class="slider-right data-v-f6d30d9a">💎 奢华享受</text></view><slider class="preference-slider data-v-f6d30d9a" value="{{A}}" min="0" max="100" step="10" activeColor="#3ba272" backgroundColor="#e5e5e5" block-color="#3ba272" block-size="20" bindchange="{{B}}"/></view></view><view wx:if="{{C}}" class="item-schedule-section data-v-f6d30d9a"><text class="section-label data-v-f6d30d9a">安排已添加的景点和美食</text><text class="section-hint data-v-f6d30d9a">将您从详情页添加的景点和美食分配到具体的日期和时间段</text><view wx:if="{{D}}" class="schedule-items data-v-f6d30d9a"><text class="schedule-items-title data-v-f6d30d9a">待分配景点</text><view wx:for="{{E}}" wx:for-item="scenic" wx:key="g" class="schedule-item-card data-v-f6d30d9a"><view class="schedule-item-info data-v-f6d30d9a"><text class="schedule-item-name data-v-f6d30d9a">📍 {{scenic.a}}</text><text wx:if="{{scenic.b}}" class="schedule-item-time data-v-f6d30d9a">{{scenic.c}}</text></view><view class="schedule-item-actions data-v-f6d30d9a"><button class="schedule-btn data-v-f6d30d9a" bindtap="{{scenic.d}}">安排时间</button><text wx:if="{{scenic.e}}" class="schedule-remove data-v-f6d30d9a" bindtap="{{scenic.f}}">移除</text></view></view></view><view wx:if="{{F}}" class="schedule-items data-v-f6d30d9a"><text class="schedule-items-title data-v-f6d30d9a">待分配美食</text><view wx:for="{{G}}" wx:for-item="food" wx:key="g" class="schedule-item-card data-v-f6d30d9a"><view class="schedule-item-info data-v-f6d30d9a"><text class="schedule-item-name data-v-f6d30d9a">🍜 {{food.a}}</text><text wx:if="{{food.b}}" class="schedule-item-time data-v-f6d30d9a">{{food.c}}</text></view><view class="schedule-item-actions data-v-f6d30d9a"><button class="schedule-btn data-v-f6d30d9a" bindtap="{{food.d}}">安排时间</button><text wx:if="{{food.e}}" class="schedule-remove data-v-f6d30d9a" bindtap="{{food.f}}">移除</text></view></view></view></view></view><view class="step-navigation data-v-f6d30d9a"><button wx:if="{{I}}" class="nav-btn prev-btn data-v-f6d30d9a" bindtap="{{J}}"> 上一步 </button><button class="{{['nav-btn', 'next-btn', 'data-v-f6d30d9a', L && 'disabled']}}" bindtap="{{M}}">{{K}}</button></view></scroll-view><view wx:if="{{N}}" class="date-picker-modal data-v-f6d30d9a" catchtap="{{X}}"><view class="date-picker-modal-content data-v-f6d30d9a" catchtap="{{W}}"><view class="date-picker-header data-v-f6d30d9a"><text class="date-picker-cancel data-v-f6d30d9a" catchtap="{{O}}">取消</text><text class="date-picker-title data-v-f6d30d9a">{{P}}</text><text class="date-picker-confirm data-v-f6d30d9a" catchtap="{{Q}}">确定</text></view><view class="date-picker-body data-v-f6d30d9a"><picker-view value="{{U}}" bindchange="{{V}}" class="date-picker-view data-v-f6d30d9a"><picker-view-column class="data-v-f6d30d9a"><view wx:for="{{R}}" wx:for-item="year" wx:key="b" class="picker-view-item data-v-f6d30d9a">{{year.a}}年 </view></picker-view-column><picker-view-column class="data-v-f6d30d9a"><view wx:for="{{S}}" wx:for-item="month" wx:key="b" class="picker-view-item data-v-f6d30d9a">{{month.a}}月 </view></picker-view-column><picker-view-column class="data-v-f6d30d9a"><view wx:for="{{T}}" wx:for-item="day" wx:key="b" class="picker-view-item data-v-f6d30d9a">{{day.a}}日 </view></picker-view-column></picker-view></view></view></view><view wx:if="{{Y}}" class="schedule-modal data-v-f6d30d9a" catchtap="{{ag}}"><view class="schedule-modal-content data-v-f6d30d9a" catchtap="{{af}}"><view class="schedule-modal-header data-v-f6d30d9a"><text class="schedule-modal-title data-v-f6d30d9a">安排景点时间</text><text class="schedule-modal-close data-v-f6d30d9a" catchtap="{{Z}}">×</text></view><view class="schedule-modal-body data-v-f6d30d9a"><text class="schedule-item-name-large data-v-f6d30d9a">📍 {{aa}}</text><view class="schedule-day-selector data-v-f6d30d9a"><text class="schedule-label data-v-f6d30d9a">选择日期</text><view class="schedule-day-options data-v-f6d30d9a"><view wx:for="{{ab}}" wx:for-item="day" wx:key="b" class="{{['schedule-day-option', 'data-v-f6d30d9a', day.c && 'active']}}" bindtap="{{day.d}}"> 第{{day.a}}天 </view></view></view><view class="schedule-time-selector data-v-f6d30d9a"><text class="schedule-label data-v-f6d30d9a">选择时间段</text><view class="schedule-time-options data-v-f6d30d9a"><view wx:for="{{ac}}" wx:for-item="slot" wx:key="c" class="{{['schedule-time-option', 'data-v-f6d30d9a', slot.d && 'active']}}" bindtap="{{slot.e}}"><text class="schedule-time-icon data-v-f6d30d9a">{{slot.a}}</text><text class="schedule-time-text data-v-f6d30d9a">{{slot.b}}</text></view></view></view></view><view class="schedule-modal-footer data-v-f6d30d9a"><button class="schedule-cancel-btn data-v-f6d30d9a" catchtap="{{ad}}">取消</button><button class="schedule-confirm-btn data-v-f6d30d9a" catchtap="{{ae}}">确定</button></view></view></view><view wx:if="{{ah}}" class="schedule-modal data-v-f6d30d9a" catchtap="{{ap}}"><view class="schedule-modal-content data-v-f6d30d9a" catchtap="{{ao}}"><view class="schedule-modal-header data-v-f6d30d9a"><text class="schedule-modal-title data-v-f6d30d9a">安排美食时间</text><text class="schedule-modal-close data-v-f6d30d9a" catchtap="{{ai}}">×</text></view><view class="schedule-modal-body data-v-f6d30d9a"><text class="schedule-item-name-large data-v-f6d30d9a">🍜 {{aj}}</text><view class="schedule-day-selector data-v-f6d30d9a"><text class="schedule-label data-v-f6d30d9a">选择日期</text><view class="schedule-day-options data-v-f6d30d9a"><view wx:for="{{ak}}" wx:for-item="day" wx:key="b" class="{{['schedule-day-option', 'data-v-f6d30d9a', day.c && 'active']}}" bindtap="{{day.d}}"> 第{{day.a}}天 </view></view></view><view class="schedule-time-selector data-v-f6d30d9a"><text class="schedule-label data-v-f6d30d9a">选择时间段</text><view class="schedule-time-options data-v-f6d30d9a"><view wx:for="{{al}}" wx:for-item="slot" wx:key="c" class="{{['schedule-time-option', 'data-v-f6d30d9a', slot.d && 'active']}}" bindtap="{{slot.e}}"><text class="schedule-time-icon data-v-f6d30d9a">{{slot.a}}</text><text class="schedule-time-text data-v-f6d30d9a">{{slot.b}}</text></view></view></view></view><view class="schedule-modal-footer data-v-f6d30d9a"><button class="schedule-cancel-btn data-v-f6d30d9a" catchtap="{{am}}">取消</button><button class="schedule-confirm-btn data-v-f6d30d9a" catchtap="{{an}}">确定</button></view></view></view><view wx:if="{{aq}}" class="nlp-modal data-v-f6d30d9a" catchtap="{{ay}}"><view class="nlp-modal-content data-v-f6d30d9a" catchtap="{{ax}}"><view class="nlp-header data-v-f6d30d9a"><text class="nlp-title data-v-f6d30d9a">💬 一句话生成行程</text><text class="nlp-close data-v-f6d30d9a" catchtap="{{ar}}">×</text></view><block wx:if="{{r0}}"><textarea class="nlp-input data-v-f6d30d9a" placeholder="我想下周去大理玩三天，预算3000，喜欢安静，不去热门景点..." placeholder-style="color: #999999;" bindinput="{{as}}" maxlength="200" focus="{{at}}" value="{{av}}"/></block><view class="nlp-hint data-v-f6d30d9a"><text class="data-v-f6d30d9a">支持自然语言描述，系统将自动解析您的需求</text></view><button class="nlp-submit-btn data-v-f6d30d9a" catchtap="{{aw}}">智能解析</button></view></view><view wx:if="{{az}}" class="loading-overlay data-v-f6d30d9a"><view class="loading-content data-v-f6d30d9a"><view class="loading-animation data-v-f6d30d9a"><view class="earth-container data-v-f6d30d9a"><text class="earth-icon data-v-f6d30d9a">🌍</text></view><view class="airplane-container data-v-f6d30d9a"><text class="airplane-icon data-v-f6d30d9a">✈️</text></view></view><view class="loading-steps data-v-f6d30d9a"><view wx:for="{{aA}}" wx:for-item="step" wx:key="c" class="{{['loading-step-item', 'data-v-f6d30d9a', step.d && 'active']}}"><text class="loading-step-icon data-v-f6d30d9a">{{step.a}}</text><text class="loading-step-text data-v-f6d30d9a">{{step.b}}</text></view></view></view></view><view wx:if="{{aB}}" class="selector-modal data-v-f6d30d9a" bindtap="{{aQ}}"><view class="selector-content data-v-f6d30d9a" catchtap="{{aP}}"><view class="selector-header data-v-f6d30d9a"><text class="selector-title data-v-f6d30d9a">{{aC}}</text><text class="selector-close data-v-f6d30d9a" bindtap="{{aD}}">×</text></view><view class="selector-tabs data-v-f6d30d9a"><view class="{{['selector-tab', 'data-v-f6d30d9a', aG && 'active']}}" bindtap="{{aH}}"><text class="data-v-f6d30d9a">待选列表</text><text wx:if="{{aE}}" class="tab-badge data-v-f6d30d9a">{{aF}}</text></view><view class="{{['selector-tab', 'data-v-f6d30d9a', aI && 'active']}}" bindtap="{{aJ}}"><text class="data-v-f6d30d9a">我的收藏</text></view><view class="{{['selector-tab', 'data-v-f6d30d9a', aK && 'active']}}" bindtap="{{aL}}"><text class="data-v-f6d30d9a">全部</text></view></view><scroll-view scroll-y class="selector-list data-v-f6d30d9a"><view wx:for="{{aM}}" wx:for-item="item" wx:key="c" class="{{['selector-item', 'data-v-f6d30d9a', item.d && 'selected']}}" bindtap="{{item.e}}"><text class="selector-item-name data-v-f6d30d9a">{{item.a}}</text><text wx:if="{{item.b}}" class="selector-check data-v-f6d30d9a">✓</text></view><view wx:if="{{aN}}" class="selector-empty data-v-f6d30d9a"><text class="data-v-f6d30d9a">暂无数据</text></view></scroll-view><view class="selector-footer data-v-f6d30d9a"><button class="selector-btn data-v-f6d30d9a" bindtap="{{aO}}">确定</button></view></view></view></view>