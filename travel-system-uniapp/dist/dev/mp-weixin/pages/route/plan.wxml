<view class="plan-page data-v-f6d30d9a"><view class="page-bg data-v-f6d30d9a"></view><scroll-view scroll-y class="plan-scroll data-v-f6d30d9a"><view class="plan-form data-v-f6d30d9a"><view class="form-header data-v-f6d30d9a"><text class="header-title data-v-f6d30d9a">智能生成你的完美行程</text></view><view class="form-item data-v-f6d30d9a"><text class="form-label data-v-f6d30d9a">目的地</text><input class="destination-input data-v-f6d30d9a" placeholder="北京" placeholder-style="color: #999999; font-weight: normal;" bindinput="{{a}}" type="text" maxlength="50" value="{{b}}"/><text class="form-hint data-v-f6d30d9a">支持自然输入，如"北京3日游"</text></view><view class="form-item data-v-f6d30d9a"><text class="form-label data-v-f6d30d9a">游玩时间</text><view class="date-picker-container data-v-f6d30d9a"><view class="date-input-wrapper data-v-f6d30d9a"><picker mode="date" value="{{e}}" start="{{f}}" bindchange="{{g}}" class="date-picker-item data-v-f6d30d9a"><view class="date-input data-v-f6d30d9a"><text class="date-label data-v-f6d30d9a">开始日期</text><text class="{{['date-value', 'data-v-f6d30d9a', d && 'placeholder']}}">{{c}}</text></view></picker><text class="date-separator data-v-f6d30d9a">至</text><picker mode="date" value="{{j}}" start="{{k}}" bindchange="{{l}}" class="date-picker-item data-v-f6d30d9a"><view class="date-input data-v-f6d30d9a"><text class="date-label data-v-f6d30d9a">结束日期</text><text class="{{['date-value', 'data-v-f6d30d9a', i && 'placeholder']}}">{{h}}</text></view></picker><view class="calendar-icon-wrapper data-v-f6d30d9a"><text class="calendar-icon data-v-f6d30d9a">📅</text></view></view></view><text class="form-hint data-v-f6d30d9a">点击输入框右侧日历图标选择具体游玩时间</text><view wx:if="{{m}}" class="days-display data-v-f6d30d9a"><text class="days-text data-v-f6d30d9a">共 {{n}} 天 {{o}} 晚</text></view></view><view class="form-item data-v-f6d30d9a"><text class="form-label data-v-f6d30d9a">旅行偏好 <text class="label-optional data-v-f6d30d9a">(可多选)</text></text><view class="tag-list data-v-f6d30d9a"><view wx:for="{{p}}" wx:for-item="tag" wx:key="b" class="{{['tag-item', 'data-v-f6d30d9a', tag.c && 'active']}}" style="{{tag.d}}" bindtap="{{tag.e}}"><text class="data-v-f6d30d9a">{{tag.a}}</text></view></view></view><view class="form-item data-v-f6d30d9a"><text class="form-label data-v-f6d30d9a">同行人</text><view class="companion-list data-v-f6d30d9a"><view wx:for="{{q}}" wx:for-item="companion" wx:key="b" class="{{['companion-item', 'data-v-f6d30d9a', companion.c && 'active']}}" bindtap="{{companion.d}}"><text class="data-v-f6d30d9a">{{companion.a}}</text></view></view></view><view class="form-item data-v-f6d30d9a"><text class="form-label data-v-f6d30d9a">每日行程选择 <text class="label-optional data-v-f6d30d9a">(可选)</text></text><text class="form-hint data-v-f6d30d9a">为每一天选择想要去的景点和美食，可从待选列表、收藏列表或全部列表中选择</text><view wx:if="{{r}}" class="pending-notice data-v-f6d30d9a"><text class="pending-notice-icon data-v-f6d30d9a">📋</text><text class="pending-notice-text data-v-f6d30d9a"> 您有{{s}}个待选项目，可在选择时添加到任意天数 </text></view><view class="daily-selections data-v-f6d30d9a"><view wx:for="{{t}}" wx:for-item="day" wx:key="k" class="day-selection-card data-v-f6d30d9a"><view class="day-selection-header data-v-f6d30d9a"><text class="day-selection-title data-v-f6d30d9a">第{{day.a}}天</text><view class="day-selection-actions data-v-f6d30d9a"><text class="action-link data-v-f6d30d9a" bindtap="{{day.c}}"> 选择景点 ({{day.b}}) </text><text class="action-link data-v-f6d30d9a" bindtap="{{day.e}}"> 选择美食 ({{day.d}}) </text></view></view><view wx:if="{{day.f}}" class="day-selection-content data-v-f6d30d9a"><view wx:if="{{day.g}}" class="selection-items data-v-f6d30d9a"><text class="selection-label data-v-f6d30d9a">景点：</text><view class="selection-tags data-v-f6d30d9a"><view wx:for="{{day.h}}" wx:for-item="scenicId" wx:key="c" class="selection-tag data-v-f6d30d9a"><text class="data-v-f6d30d9a">{{scenicId.a}}</text><text class="tag-close data-v-f6d30d9a" bindtap="{{scenicId.b}}">×</text></view></view></view><view wx:if="{{day.i}}" class="selection-items data-v-f6d30d9a"><text class="selection-label data-v-f6d30d9a">美食：</text><view class="selection-tags data-v-f6d30d9a"><view wx:for="{{day.j}}" wx:for-item="foodId" wx:key="c" class="selection-tag data-v-f6d30d9a"><text class="data-v-f6d30d9a">{{foodId.a}}</text><text class="tag-close data-v-f6d30d9a" bindtap="{{foodId.b}}">×</text></view></view></view></view></view></view></view></view><view class="submit-section data-v-f6d30d9a"><button class="{{['submit-btn', 'data-v-f6d30d9a', v && 'disabled']}}" bindtap="{{w}}"><text class="data-v-f6d30d9a">开始智能规划</text></button></view><view wx:if="{{x}}" class="recent-routes data-v-f6d30d9a"><view class="section-title data-v-f6d30d9a">最近生成的线路</view><view wx:for="{{y}}" wx:for-item="route" wx:key="b" class="route-item data-v-f6d30d9a" bindtap="{{route.c}}"><text class="route-item-title data-v-f6d30d9a">{{route.a}}</text><text class="route-item-arrow data-v-f6d30d9a">›</text></view></view></scroll-view><view wx:if="{{z}}" class="loading-overlay data-v-f6d30d9a"><view class="loading-content data-v-f6d30d9a"><view class="loading-animation data-v-f6d30d9a"><view class="earth-container data-v-f6d30d9a"><text class="earth-icon data-v-f6d30d9a">🌍</text></view><view class="airplane-container data-v-f6d30d9a"><text class="airplane-icon data-v-f6d30d9a">✈️</text></view></view><text class="loading-text data-v-f6d30d9a">正在为您规划行程...</text></view></view><view wx:if="{{A}}" class="selector-modal data-v-f6d30d9a" bindtap="{{P}}"><view class="selector-content data-v-f6d30d9a" catchtap="{{O}}"><view class="selector-header data-v-f6d30d9a"><text class="selector-title data-v-f6d30d9a">{{B}}</text><text class="selector-close data-v-f6d30d9a" bindtap="{{C}}">×</text></view><view class="selector-tabs data-v-f6d30d9a"><view class="{{['selector-tab', 'data-v-f6d30d9a', F && 'active']}}" bindtap="{{G}}"><text class="data-v-f6d30d9a">待选列表</text><text wx:if="{{D}}" class="tab-badge data-v-f6d30d9a">{{E}}</text></view><view class="{{['selector-tab', 'data-v-f6d30d9a', H && 'active']}}" bindtap="{{I}}"><text class="data-v-f6d30d9a">我的收藏</text></view><view class="{{['selector-tab', 'data-v-f6d30d9a', J && 'active']}}" bindtap="{{K}}"><text class="data-v-f6d30d9a">全部</text></view></view><scroll-view scroll-y class="selector-list data-v-f6d30d9a"><view wx:for="{{L}}" wx:for-item="item" wx:key="c" class="{{['selector-item', 'data-v-f6d30d9a', item.d && 'selected']}}" bindtap="{{item.e}}"><text class="selector-item-name data-v-f6d30d9a">{{item.a}}</text><text wx:if="{{item.b}}" class="selector-check data-v-f6d30d9a">✓</text></view><view wx:if="{{M}}" class="selector-empty data-v-f6d30d9a"><text class="data-v-f6d30d9a">暂无数据</text></view></scroll-view><view class="selector-footer data-v-f6d30d9a"><button class="selector-btn data-v-f6d30d9a" bindtap="{{N}}">确定</button></view></view></view></view>